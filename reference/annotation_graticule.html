<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Global graticule annotation for ggplot2 maps — annotation_graticule • ggmapcn</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Global graticule annotation for ggplot2 maps — annotation_graticule"><meta name="description" content="Draw global latitude-longitude graticules with degree labels as annotation
layers for `ggplot2` maps. Graticules are constructed in geographic
coordinates (EPSG:4326) over a user-defined window (given by `xlim`/`ylim`,
default: the full globe), optionally split at the antimeridian according to
the target CRS, and then transformed into the map CRS. Regional maps usually
do not need this function and can rely on the default `coord_sf()` axes."><meta property="og:description" content="Draw global latitude-longitude graticules with degree labels as annotation
layers for `ggplot2` maps. Graticules are constructed in geographic
coordinates (EPSG:4326) over a user-defined window (given by `xlim`/`ylim`,
default: the full globe), optionally split at the antimeridian according to
the target CRS, and then transformed into the map CRS. Regional maps usually
do not need this function and can rely on the default `coord_sf()` axes."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggmapcn</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Adding_Basic_Map.html">Adding Basic Map</a></li>
    <li><a class="dropdown-item" href="../articles/Advanced_Scalebar_and_Compass.html">Advanced Scalebar and Compass</a></li>
    <li><a class="dropdown-item" href="../articles/World_Map_Overview.html">World Map Overview</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/Rimagination/ggmapcn">GitHub</a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Global graticule annotation for ggplot2 maps</h1>
      <small class="dont-index">Source: <a href="https://github.com/Rimagination/ggmapcn/blob/main/R/annotation_graticule.R" class="external-link"><code>R/annotation_graticule.R</code></a></small>
      <div class="d-none name"><code>annotation_graticule.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Draw global latitude-longitude graticules with degree labels as annotation
layers for `ggplot2` maps. Graticules are constructed in geographic
coordinates (EPSG:4326) over a user-defined window (given by `xlim`/`ylim`,
default: the full globe), optionally split at the antimeridian according to
the target CRS, and then transformed into the map CRS. Regional maps usually
do not need this function and can rely on the default `coord_sf()` axes.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">annotation_graticule</span><span class="op">(</span></span>
<span>  xlim <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ylim <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  crs <span class="op">=</span> <span class="st">"+proj=longlat +datum=WGS84"</span>,</span>
<span>  lon_step <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  lat_step <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  line_color <span class="op">=</span> <span class="st">"grey70"</span>,</span>
<span>  line_width <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>  line_type <span class="op">=</span> <span class="st">"dashed"</span>,</span>
<span>  label_color <span class="op">=</span> <span class="st">"grey30"</span>,</span>
<span>  label_size <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  label_offset <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  label_offset_lon <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  label_offset_lat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sides <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"left"</span>, <span class="st">"bottom"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-xlim">xlim<a class="anchor" aria-label="anchor" href="#arg-xlim"></a></dt>
<dd><p>Numeric vector of length 2 giving the longitude range in degrees
as `c(xmin, xmax)` in longitude-latitude (WGS84, EPSG:4326). Longitudes are
interpreted in `[-180, 180]`. If both `xlim` and `ylim` are `NULL`
(default), the full globe `(-180, 180)` is used.</p></dd>


<dt id="arg-ylim">ylim<a class="anchor" aria-label="anchor" href="#arg-ylim"></a></dt>
<dd><p>Numeric vector of length 2 giving the latitude range in degrees
as `c(ymin, ymax)` in longitude-latitude (WGS84, EPSG:4326). Latitudes are
interpreted in `[-90, 90]`. If both `xlim` and `ylim` are `NULL`
(default), the full globe `(-90, 90)` is used.</p></dd>


<dt id="arg-crs">crs<a class="anchor" aria-label="anchor" href="#arg-crs"></a></dt>
<dd><p>Target coordinate reference system for the graticule, given
as a PROJ string or `sf::crs` object. This should match the CRS used in
your map layers and `coord_sf()`. The default is a WGS84 longitude-
latitude definition.</p></dd>


<dt id="arg-lon-step">lon_step<a class="anchor" aria-label="anchor" href="#arg-lon-step"></a></dt>
<dd><p>Spacing in degrees between meridians. Default is `60`.</p></dd>


<dt id="arg-lat-step">lat_step<a class="anchor" aria-label="anchor" href="#arg-lat-step"></a></dt>
<dd><p>Spacing in degrees between parallels. Default is `30`.</p></dd>


<dt id="arg-line-color">line_color<a class="anchor" aria-label="anchor" href="#arg-line-color"></a></dt>
<dd><p>Line colour for graticule lines. Default is `"grey70"`.</p></dd>


<dt id="arg-line-width">line_width<a class="anchor" aria-label="anchor" href="#arg-line-width"></a></dt>
<dd><p>Line width for graticule lines. Default is `0.3`.</p></dd>


<dt id="arg-line-type">line_type<a class="anchor" aria-label="anchor" href="#arg-line-type"></a></dt>
<dd><p>Line type for graticule lines. Default is `"dashed"`.</p></dd>


<dt id="arg-label-color">label_color<a class="anchor" aria-label="anchor" href="#arg-label-color"></a></dt>
<dd><p>Text colour for labels. Default is `"grey30"`.</p></dd>


<dt id="arg-label-size">label_size<a class="anchor" aria-label="anchor" href="#arg-label-size"></a></dt>
<dd><p>Text size for labels, passed to `ggplot2::geom_text()`.
Default is `3`.</p></dd>


<dt id="arg-label-offset">label_offset<a class="anchor" aria-label="anchor" href="#arg-label-offset"></a></dt>
<dd><p>Common offset applied to all labels, in the units of the
target CRS. For geographic CRSs (degrees), this is interpreted as degrees
(default `5`). For projected CRSs (e.g. metres), you typically need a much
larger value (e.g. `3e5` for Robinson or azimuthal projections).</p></dd>


<dt id="arg-label-offset-lon">label_offset_lon<a class="anchor" aria-label="anchor" href="#arg-label-offset-lon"></a></dt>
<dd><p>Optional offset applied only to longitude labels.
If supplied, this overrides `label_offset` for longitude labels.</p></dd>


<dt id="arg-label-offset-lat">label_offset_lat<a class="anchor" aria-label="anchor" href="#arg-label-offset-lat"></a></dt>
<dd><p>Optional offset applied only to latitude labels.
If supplied, this overrides `label_offset` for latitude labels.</p></dd>


<dt id="arg-sides">sides<a class="anchor" aria-label="anchor" href="#arg-sides"></a></dt>
<dd><p>Character vector indicating on which sides labels should be
drawn. Any combination of `"bottom"`, `"top"`, `"left"`, `"right"`.
Default is `c("left", "bottom")`.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments forwarded to `ggplot2::geom_sf()` for the
graticule line layer (for example, `alpha`).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of two `ggplot2` layers: a `geom_sf()` layer for graticule
  lines and a `geom_text()` layer for the labels.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Graticules are always generated in WGS84 longitude-latitude (EPSG:4326).
When a non-zero central meridian (`lon_0`) is detected in the target CRS,
meridians and parallels can be split at the antimeridian via
`sf::st_break_antimeridian()` before being transformed, which avoids
unexpected line wrapping in projections centred away from 0 degrees.</p>
<p>Latitude labels at +/-90 degrees are always omitted. When drawing a full-globe
longitude-latitude map with a 0 degree central meridian (that is, when `xlim` and
`ylim` are both `NULL` and the CRS is geographic with `lon_0 = 0`),
longitude labels at +/-180 degrees are omitted (the corresponding graticule lines may
still be drawn).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># 1. Graticule on a WGS84 world map</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="geom_world.html">geom_world</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">annotation_graticule</span><span class="op">(</span></span></span>
<span class="r-in"><span>    lon_step     <span class="op">=</span> <span class="fl">60</span>,</span></span>
<span class="r-in"><span>    lat_step     <span class="op">=</span> <span class="fl">30</span>,</span></span>
<span class="r-in"><span>    label_offset <span class="op">=</span> <span class="fl">5</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="st">"+proj=longlat +datum=WGS84"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="annotation_graticule-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 2. Robinson projection centred at 150E</span></span></span>
<span class="r-in"><span><span class="va">crs_robin_150</span> <span class="op">&lt;-</span> <span class="st">"+proj=robin +lon_0=150 +datum=WGS84"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="geom_world.html">geom_world</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="va">crs_robin_150</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">annotation_graticule</span><span class="op">(</span></span></span>
<span class="r-in"><span>    crs           <span class="op">=</span> <span class="va">crs_robin_150</span>,</span></span>
<span class="r-in"><span>    lon_step      <span class="op">=</span> <span class="fl">30</span>,</span></span>
<span class="r-in"><span>    lat_step      <span class="op">=</span> <span class="fl">15</span>,</span></span>
<span class="r-in"><span>    label_offset <span class="op">=</span> <span class="fl">3e5</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="va">crs_robin_150</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> although coordinates are longitude/latitude, st_intersection assumes that they</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> are planar</span>
<span class="r-plt img"><img src="annotation_graticule-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 3. Regional China map (long-lat) with graticule lines and axis labels</span></span></span>
<span class="r-in"><span><span class="va">cn_xlim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">70</span>, <span class="fl">140</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cn_ylim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">60</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="geom_world.html">geom_world</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">annotation_graticule</span><span class="op">(</span></span></span>
<span class="r-in"><span>    xlim          <span class="op">=</span> <span class="va">cn_xlim</span>,</span></span>
<span class="r-in"><span>    ylim          <span class="op">=</span> <span class="va">cn_ylim</span>,</span></span>
<span class="r-in"><span>    crs           <span class="op">=</span> <span class="fl">4326</span>,</span></span>
<span class="r-in"><span>    lon_step      <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>    lat_step      <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>    label_color   <span class="op">=</span> <span class="cn">NA</span>,    <span class="co"># draw only lines; use axis labels instead</span></span></span>
<span class="r-in"><span>    label_offset <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>    label_size    <span class="op">=</span> <span class="fl">3.5</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    xlim   <span class="op">=</span> <span class="va">cn_xlim</span>,</span></span>
<span class="r-in"><span>    ylim   <span class="op">=</span> <span class="va">cn_ylim</span>,</span></span>
<span class="r-in"><span>    expand <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    x <span class="op">=</span> <span class="st">"Longitude"</span>,</span></span>
<span class="r-in"><span>    y <span class="op">=</span> <span class="st">"Latitude"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="annotation_graticule-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Liang Ren.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

