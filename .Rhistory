# 2. Robinson projection centred at 150°E
crs_robin_150 <- "+proj=robin +lon_0=150 +datum=WGS84"
ggplot() +
geom_world(crs = crs_robin_150) +
coord_sf(crs = crs_robin_150) +
theme_void()
?annotation_scale
?annotation_scalebar
nc <- sf::st_read(system.file("shape/nc.shp", package = "sf"), quiet = TRUE)
base_plot <- ggplot2::ggplot() +
ggplot2::geom_sf(data = nc, fill = "grey90") +
ggplot2::theme_minimal()
# Example 1: Projected CRS with a longer scale bar
base_plot + ggplot2::coord_sf(crs = 32617) +
annotation_scalebar(location = "bl", width_hint = 0.5)
# Example 2: Ticks style, top-right (now correctly rendered)
base_plot + ggplot2::coord_sf(crs = 32617) +
annotation_scalebar(location = "tr", style = "ticks")
?geom_boundary_cn
# Example 1: Basic China map
ggplot() +
geom_boundary_cn() +
annotation_scalebar(location = "tr", style = "ticks")+
theme_minimal()
# Example 1: Basic China map
ggplot() +
geom_boundary_cn() +
annotation_scalebar()+
theme_minimal()
# Example 1: Basic China map
ggplot() +
geom_boundary_cn() +
annotation_scalebar(location = "tr", style = "ticks")+
theme_minimal()
?annotation_scalebar
# Example 2: Ticks style, top-right (now correctly rendered)
base_plot + ggplot2::coord_sf(crs = 32617) +
annotation_scalebar(location = "tr", style = "ticks")
usethis::use_pkgdown()
setwd("D:/Rdata/mypkg/ggmapcn")
ggplot() +
basemap_vege()
devtools::document()  # 或者 roxygen2::roxygenise()
library(pkgdown)
# 一键重建整个网站
pkgdown::build_site()
ggplot() +
geom_world() +
annotation_graticule(
extent       = c(-80, 20, 0, 70),  # xmin, xmax, ymin, ymax
lon_step     = 20,
lat_step     = 10,
label_offset = 3,
sides        = c("left", "bottom")
) +
coord_sf(xlim = c(-80, 20), ylim = c(0, 70), expand = FALSE) +
theme_void()
ggplot() +
geom_world() +
annotation_graticule(
extent       = c(-80, 20, 0, 70),
lon_step     = 20,
lat_step     = 10,
label_offset = 5,    # 稍微大一点
sides        = c("left", "bottom")
) +
coord_sf(
xlim    = c(-80, 20),
ylim    = c(0, 70),
expand  = TRUE   # 允许 label 出现在外边
) +
theme_void()
ggplot(world) +
geom_sf() +
coord_sf(
xlim = c(-180, 180),
ylim = c(-60, 80),
expand = FALSE
) +
theme_bw()
library(ggplot2)
ggplot(world) +
geom_sf() +
coord_sf(
xlim = c(-180, 180),
ylim = c(-60, 80),
expand = FALSE
) +
theme_bw()
load(world)
library(sf)
library(rnaturalearth)
library(rnaturalearthdata)
world <- ne_countries(scale = "medium", returnclass = "sf")
ggplot(world) +
geom_sf() +
coord_sf(
xlim = c(-180, 180),
ylim = c(-60, 80),
expand = FALSE
) +
theme_bw()
?geom_world
# 1. Basic world map in WGS84
ggplot() +
geom_world() +
theme_bw()
# 3. Geographic CRS with shifted central meridian
crs_wgs84_150 <- "+proj=longlat +datum=WGS84 +lon_0=150"
ggplot() +
geom_world(crs = crs_wgs84_150) +
coord_sf(crs = crs_wgs84_150) +
theme_void()
# 3. Geographic CRS with shifted central meridian
crs_wgs84_150 <- "+proj=longlat +datum=WGS84 +lon_0=150"
ggplot() +
geom_world(crs = crs_wgs84_150) +
coord_sf(crs = crs_wgs84_150) +
theme_bw()
# 1. Basic world map in WGS84
ggplot() +
geom_world() +
theme_bw()
# 1. Basic world map in WGS84
ggplot() +
geom_world(show_ocean=FALSE) +
theme_bw()
browseVignettes("ggmapcn")
ggplot() +
geom_world(show_ocean = FALSE) +
coord_sf(
xlim = c(-180, 180),
ylim = c(-60, 80),
expand = FALSE,
label_axes     = "all",   # 强制四条轴都显示标签
label_graticule = "EWNS"  # 东西南北都标（取决于你用的 ggplot2 版本）
) +
theme_bw()
crs_robin_150 <- "+proj=robin +lon_0=150 +datum=WGS84"
ggplot() +
geom_world(crs = crs_robin_150) +
annotation_graticule(
crs          = crs_robin_150,
lon_step     = 30,
lat_step     = 15,
label_offset = 3e5,
hide_axes    = TRUE   # 让它顺手关掉 ggplot 轴文字
) +
coord_sf(crs = crs_robin_150) +
theme_void()
ggplot() +
geom_world(show_ocean = FALSE) +
coord_sf(
xlim = c(70, 140), ylim = c(10, 55),
expand = FALSE
) +
scale_x_continuous(
breaks = seq(70, 140, 10),
labels = function(x) paste0(x, "°E")
) +
scale_y_continuous(
breaks = seq(10, 55, 5),
labels = function(y) paste0(y, "°N")
) +
theme_bw()
# theme_get()
theme_set(theme_gray())
# 1. Basic world map in WGS84
ggplot() +
geom_world() +
theme_void()
# 1. Basic world map in WGS84
ggplot() +
geom_world() +
theme_bw()
ggplot() + geom_world(show_ocean = FALSE) + theme_bw()
# 1. Basic world map in WGS84
ggplot() +
geom_world() +
coord_sf(expand = TRUE)
theme_bw()
# 1. Basic world map in WGS84
ggplot() +
geom_world() +
coord_sf(expand = TRUE) +
theme_bw()
ggplot() + geom_world(show_ocean = FALSE) + theme_bw()
ggplot() +
geom_world() +
theme_minimal()
library(ggplot2)
ggplot() +
geom_world() +  # 你的函数
theme_minimal() +
theme(
# 关键：将面板元素（网格线）置于数据层之上
panel.ontop = TRUE,
# 为了不让原本的白色背景挡住视线，将其设为透明
panel.background = element_blank(),
# 可选：调整网格线颜色，确保在蓝色海洋和灰色陆地上都可见
panel.grid.major = element_line(color = "white", linetype = "dotted")
)
ggplot() +
geom_world() +
theme_minimal() +
theme(panel.ontop = TRUE, panel.background = element_blank()) +
# 显式调用 coord_sf，expand = FALSE 有时会导致边缘的字被切掉，
# 尝试去掉 expand 或者设为 TRUE 看看
coord_sf(expand = TRUE)
library(ggplot2)
ggplot() +
geom_world() +  # 你的函数
theme_minimal() +
theme(
# 关键：将面板元素（网格线）置于数据层之上
panel.ontop = TRUE,
# 为了不让原本的白色背景挡住视线，将其设为透明
panel.background = element_blank(),
# 可选：调整网格线颜色，确保在蓝色海洋和灰色陆地上都可见
panel.grid.major = element_line(color = "white", linetype = "dotted")
)+
coord_sf(datum = st_crs(4326), expand = FALSE, clip = "off")
library(ggplot2)
ggplot() +
geom_world() +  # 你的函数
theme_minimal() +
theme(
# 关键：将面板元素（网格线）置于数据层之上
panel.ontop = TRUE,
# 为了不让原本的白色背景挡住视线，将其设为透明
panel.background = element_blank(),
# 可选：调整网格线颜色，确保在蓝色海洋和灰色陆地上都可见
panel.grid.major = element_line(color = "white", linetype = "dotted")
)+
coord_sf(clip = "off")
library(ggplot2)
ggplot() +
geom_world() +  # 你的函数
theme_minimal() +
theme(
# 关键：将面板元素（网格线）置于数据层之上
panel.ontop = TRUE,
# 为了不让原本的白色背景挡住视线，将其设为透明
panel.background = element_blank(),
# 可选：调整网格线颜色，确保在蓝色海洋和灰色陆地上都可见
panel.grid.major = element_line(color = "white", linetype = "dotted")
)+
coord_sf(datum = st_crs(4326))
library(ggplot2)
ggplot() +
geom_world() +  # 你的函数
theme_minimal() +
theme(
# 关键：将面板元素（网格线）置于数据层之上
panel.ontop = TRUE,
# 为了不让原本的白色背景挡住视线，将其设为透明
panel.background = element_blank(),
# 可选：调整网格线颜色，确保在蓝色海洋和灰色陆地上都可见
panel.grid.major = element_line(color = "white", linetype = "dotted")
)+
coord_sf(datum = st_crs(4326), expand = FALSE)
library(ggplot2)
ggplot() +
geom_world() +  # 你的函数
theme_minimal() +
theme(
# 关键：将面板元素（网格线）置于数据层之上
panel.ontop = TRUE,
# 为了不让原本的白色背景挡住视线，将其设为透明
panel.background = element_blank(),
# 可选：调整网格线颜色，确保在蓝色海洋和灰色陆地上都可见
panel.grid.major = element_line(color = "white", linetype = "dotted")
)+
coord_proj(datum = st_crs(4326))
library(ggplot2)
ggplot() +
geom_world() +  # 你的函数
theme_minimal() +
theme(
# 关键：将面板元素（网格线）置于数据层之上
panel.ontop = TRUE,
# 为了不让原本的白色背景挡住视线，将其设为透明
panel.background = element_blank(),
# 可选：调整网格线颜色，确保在蓝色海洋和灰色陆地上都可见
panel.grid.major = element_line(color = "white", linetype = "dotted")
)+
coord_proj(crs=4326)
# 2. Clean publication-style basemap (no axes)
crs_robin_150 <- "+proj=robin +lon_0=150 +datum=WGS84"
ggplot() +
geom_world(crs = crs_robin_150) +
coord_sf(
crs    = crs_robin_150,
expand = FALSE
) +
theme_void()
# 3. Regional map with latitude–longitude axes (example: East Asia)
ggplot() +
geom_world(crs = 4326, show_ocean = FALSE) +
coord_sf(
crs    = 4326,
xlim   = c(70, 140),
ylim   = c(10, 55),
expand = FALSE,
datum  = sf::st_crs(4326)
) +
scale_x_continuous(
breaks = seq(70, 140, 10),
labels = function(x) paste0(x, "\u00B0E")
) +
scale_y_continuous(
breaks = seq(10, 55, 5),
labels = function(y) paste0(y, "\u00B0N")
) +
theme_minimal() +
theme(panel.ontop = TRUE)
# 1. Global long–lat map with default graticule
ggplot() +
geom_world(crs = 4326) +
coord_sf(
crs    = 4326,
xlim   = c(-180, 180),
ylim   = c(-60, 80),
expand = FALSE,
datum  = sf::st_crs(4326)  # 关键：告诉 ggplot 这是经纬度
) +
theme_minimal() +
theme(
panel.ontop = TRUE   # 关键：网格线画在 ocean 多边形上面
)
# 1. Simplest world map (minimal example)
ggplot() +
geom_world() +
theme_void()
ggplot() +
geom_world() +
coord_sf(
crs    = 4326,
expand = FALSE,
datum  = sf::st_crs(4326)
) +
theme_minimal() +
theme(panel.ontop = TRUE)
# 3. Without ocean layer
ggplot() +
geom_world(show_ocean = FALSE) +
theme_minimal()
# 1. Simplest world map
ggplot() +
geom_world() +
theme_void()
ggplot() +
geom_world(crs = 4326) +
coord_sf(crs = 4326) +
theme_void()
# 1. Simplest world map
ggplot() +
geom_world() +
theme_void()
# 1. Simplest world map
ggplot() +
geom_world() +
theme_void()
# 2. World map with long–lat axes
ggplot() +
geom_world() +
coord_sf(
crs    = 4326,
expand = FALSE,
datum  = sf::st_crs(4326)
) +
theme_minimal() +
theme(panel.ontop = TRUE)
# 3. Without ocean layer
ggplot() +
geom_world(show_ocean = FALSE) +
theme_minimal()
# 4. Without administrative boundaries
ggplot() +
geom_world(show_admin_boundaries = FALSE) +
theme_minimal()
# 5. Robinson projection centred at 150°E
crs_robin_150 <- "+proj=robin +lon_0=150 +datum=WGS84"
ggplot() +
geom_world(crs = crs_robin_150) +
coord_sf(crs = crs_robin_150) +
theme_void()
# 6. Highlight China
ggplot() +
geom_world(
country_fill = "grey95",show_frame   = TRUE) +
geom_world(
filter_attribute = "SOC",
filter           = "CHN",
country_fill     = "red",
country_boundary_color = "black"
) +
theme_void()
?annotation_graticule
# 1. Graticule on a WGS84 world map (lines + labels)
ggplot() +
geom_world() +
annotation_graticule(
lon_step     = 60,
lat_step     = 30,
label_offset = 5
) +
coord_sf(
crs    = 4326,
expand = FALSE,
datum  = sf::st_crs(4326)
) +
theme_void()
# 2. Robinson projection centred at 150°E
crs_robin_150 <- "+proj=robin +lon_0=150 +datum=WGS84"
ggplot() +
geom_world(crs = crs_robin_150) +
annotation_graticule(
crs          = crs_robin_150,
lon_step     = 30,
lat_step     = 15,
label_offset = 3e5  # adjust for projected units (metres)
) +
coord_sf(crs = crs_robin_150) +
theme_void()
# 3. Regional map: use coord_sf() for labels, only draw lines here
cn_extent <- c(70, 140, 10, 60)
ggplot() +
geom_world() +
annotation_graticule(
extent      = cn_extent,
lon_step    = 10,
lat_step    = 5,
show_labels = FALSE
) +
coord_sf(
crs    = 4326,
xlim   = cn_extent[1:2],
ylim   = cn_extent[3:4],
expand = FALSE,
datum  = sf::st_crs(4326)
) +
theme_minimal() +
theme(panel.ontop = TRUE)
# 1. Graticule on a WGS84 world map (lines + labels)
ggplot() +
geom_world() +
annotation_graticule(
lon_step     = 60,
lat_step     = 30,
label_offset = 5
) +
coord_sf(
crs    = 4326,
expand = FALSE,
datum  = sf::st_crs(4326)
) +
theme_void()
# 3. Regional map: use coord_sf() for labels, only draw lines here
cn_extent <- c(70, 140, 10, 60)
ggplot() +
geom_world() +
annotation_graticule(
extent      = cn_extent,
lon_step    = 10,
lat_step    = 5,
show_labels = FALSE
) +
coord_sf(
crs    = 4326,
xlim   = cn_extent[1:2],
ylim   = cn_extent[3:4],
expand = TRUE,
datum  = sf::st_crs(4326)
) +
theme_minimal() +
theme(panel.ontop = TRUE)
# 1. Graticule on a WGS84 world map (lines + labels)
ggplot() +
geom_world() +
annotation_graticule(
lon_step     = 60,
lat_step     = 30,
label_offset = 5
) +
coord_sf(
crs    = 4326,
expand = TRUE,
datum  = sf::st_crs(4326)
) +
theme_void()
# 1. Graticule on a WGS84 world map (lines + labels)
ggplot() +
geom_world() +
annotation_graticule(
lon_step     = 60,
lat_step     = 30,
label_offset = 5
) +
theme_void()
# 3. Regional map: use coord_sf() for labels, only draw lines here
cn_extent <- c(70, 140, 10, 60)
ggplot() +
geom_world() +
annotation_graticule(
extent      = cn_extent,
lon_step    = 10,
lat_step    = 5,
show_labels = FALSE
) +
theme_minimal() +
theme(panel.ontop = TRUE)
